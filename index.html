<!-- PythonitGang Hub // Created by Roilafufit -->
<!-- github.com/Roilafufit/PythonitGang-Hub -->
<title>PythonitGang Hub</title>
<link rel="icon" href="pythonitgang-favicon.ico">
<link rel="shortcut icon" sizes="192x192" href="pythonitgang-favicon192x192.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#3AB3DA">

<script src="https://unpkg.com/axios@0.21.0/dist/axios.min.js"></script>
<script type="text/javascript">
function calcTimeHeld(acquiredStr) {
    var acquired = acquiredStr.split(/[\s\-\:]+/);
    var acquiredDate = new Date(Date.UTC(acquired[0],(acquired[1] - 1),acquired[2],acquired[3],acquired[4],acquired[5]));
    var now = new Date();
    var timeDelta = now - acquiredDate;
    var dateStr = "";
    if (parseInt(timeDelta/1000/60/60/24) > 0) {dateStr += parseInt(timeDelta/1000/60/60/24) + "d ";}
    if (parseInt(timeDelta/1000/60/60%24) > 0) {dateStr += parseInt(timeDelta/1000/60/60%24) + "h ";}
    if (parseInt(timeDelta/1000/60%60) > 0) {dateStr += parseInt(timeDelta/1000/60%60) + "m";}
    dateStr += parseInt(timeDelta/1000%60) + "s";
    return dateStr;
}

function adjustWidth() {
    try {
        if (window.innerWidth < 686) {
            if (window.innerWidth >= 620) {
                document.getElementById("iframes-seperator").innerHTML = "";
            } else {
                document.getElementById("iframes-seperator").innerHTML = "<br>";
            }
        } else {
            document.getElementById("iframes-seperator").innerHTML = "Roilafufit";
        }
    } catch (err) {
        //nothing lel
    }
}

function main() {
    adjustWidth();
    axios.get('https://api.wynncraft.com/public_api.php?action=guildStats&command=PythonitGang')
        .then(response => {
            console.log("Request to " + response.config.url + " returned with status code " + response.status);
            if (response.status != 200) {
                alert("Error while fetching data from API!\nStatus code: " + response.status + ". Please report this!");}
            document.getElementById("lvl").innerHTML = response.data.level + " (" + response.data.xp + "%)";
            document.getElementById("bannertier").innerHTML = "Tier " + response.data.banner.tier;
            var members = "";
            for (var i = 0; i < response.data.members.length; i++) {
                members += response.data.members[i].name + "|";
            }
            window.sessionStorage.setItem("PythonitGangHub_temp1", members);
            window.sessionStorage.setItem("PythonitGangHub_temp2", response.data.territories);
        })
        .catch(error => {
            alert("An error occured! Please report:\n" + error);
            console.log(error);
        });
    axios.get('https://api.wynncraft.com/public_api.php?action=territoryList')
        .then(response => {
            console.log("Request to " + response.config.url + " returned with status code " + response.status);
            if (response.status != 200) {
                alert("Error while fetching data from API!\nStatus code: " + response.status + ". Please report this!");}
            var territoriesIframe = " ";
            var warsIframe = " ";
            for (var i in response.data.territories) {
                var t = response.data.territories[i];
                if (t.guild == "PythonitGang") {
                    territoriesIframe += "<b>" + t.territory + "</b><br>Held for " + calcTimeHeld(t.acquired) + "<br>";
                    if (t.attacker) {
                        territoriesIframe += "<span style='color:red'>Territory is being attacked by " + t.attacker + "!</span></b><br>";
                    }
                } else if (t.attacker == "PythonitGang") {
                    warsIframe += "<span style='color:blue'>Attacking " + t.territory + "!</span><br>Currently held by " + t.guild;
                }
                try {
                    document.getElementById(t.territory.replaceAll(" ", "-") + "_guild").innerHTML = t.guild;
                    document.getElementById(t.territory.replaceAll(" ", "-") + "_time").innerHTML = calcTimeHeld(t.acquired);
                    if (t.attacker) {
                        document.getElementById(t.territory.replaceAll(" ", "-") + "_time").innerHTML += "<br><b>Being attacked by " + t.attacker + "</b>";
                    }
                } catch (TypeError) {
                    // nothing lel
                }
            }
            window.sessionStorage.setItem("PythonitGangHub_temp4", territoriesIframe);
            window.sessionStorage.setItem("PythonitGangHub_temp5", warsIframe);
            window.sessionStorage.setItem("PythonitGangHub_temp3", "ready");
            document.getElementById("members").src = "members.html";
            document.getElementById("territories").src = "territories.html";
        })
        .catch(error => {
            alert("An error occured! Please report:\n" + error);
            console.log(error);
        });
}
</script>
<center><body onresize="adjustWidth()">
<span style="font-size:50px;font-family:Arial">PythonitGang Hub</span>
<noscript><br><span style="color:red;font-size:30px">PythonitGang Hub needs <b>Javascript</b> in order to work!<br>Please enable javascript and refresh this page.</span></noscript>
<hr>
Guild level: <span id="lvl">Loading...</span>
<br><br>Guild banner: <span id="bannertier">Loading...</span>
<br><br><a href="https://www.planetminecraft.com/banner/?b=8cCdc8458dbc5" target="_blank"><b>Guild banner</b></a> | <a href="https://www.planetminecraft.com/banner/?b=8cCdc8458c5db" target="_blank">Banner alt #1</a> | <a href="https://www.planetminecraft.com/banner/?b=dcbdudsczcygCd3" target="_blank">Banner alt #2</a> | <a href="https://www.planetminecraft.com/banner/?b=5cb5u5sczcygC53" target="_blank">Banner alt #3</a> | <a href="https://www.planetminecraft.com/banner/?b=gc38cdf" target="_blank">OG banner</a>
<br><br><br>
<iframe id="members" width=300 height=200 frameBorder=0>PythonitGang Hub by Roilafufit<br><a href="members.html" target="_blank">members</a></iframe>
<span style="color:white" id="iframes-seperator">Roilafufit</span>
<iframe id="territories" width=300 height=200 frameBorder=0>PythonitGang Hub by Roilafufit<br><a href="territories.html" target="_blank">territories</a></iframe>
<br>
Artemis alliance FFA territories:<br><br>
<span style="text-align:center; display:inline-block; width:169px;">
Emerald Trail<br><span id="Emerald-Trail_guild">Loading...</span><br>Held for <span id="Emerald-Trail_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Detlas<br><span id="Detlas_guild">Loading...</span><br>Held for <span id="Detlas_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Bob's Tomb<br><span id="Bob's-Tomb_guild">Loading...</span><br>Held for <span id="Bob's-Tomb_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Battle Tower<br><span id="Battle-Tower_guild">Loading...</span><br>Held for <span id="Battle-Tower_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Herb Cave<br><span id="Herb-Cave_guild">Loading...</span><br>Held for <span id="Herb-Cave_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Temple of Legends<br><span id="Temple-of-Legends_guild">Loading...</span><br>Held for <span id="Temple-of-Legends_time">Loading...</span>
</span><br><br><br>
<span style="text-align:center; display:inline-block; width:169px;">
Cinfras<br><span id="Cinfras_guild">Loading...</span><br>Held for <span id="Cinfras_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Guild Hall<br><span id="Guild-Hall_guild">Loading...</span><br>Held for <span id="Guild-Hall_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Hive<br><span id="Hive_guild">Loading...</span><br>Held for <span id="Hive_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Qira's Battle Room<br><span id="Qira's-Battle-Room_guild">Loading...</span><br>Held for <span id="Qira's-Battle-Room_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Thesead<br><span id="Thesead_guild">Loading...</span><br>Held for <span id="Thesead_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Raider's Base Lower<br><span id="Raider's-Base-Lower_guild">Loading...</span><br>Held for <span id="Raider's-Base-Lower_time">Loading...</span>
</span><br><br><br><br>
Light realm territories:<br><br>
<span style="text-align:center; display:inline-block; width:169px;">
Light Realm Entrance<br><span id="Light-Realm-Entrance_guild">Loading...</span><br>Held for <span id="Light-Realm-Entrance_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Light Realm East Upper<br><span id="Light-Realm-East-Upper_guild">Loading...</span><br>Held for <span id="Light-Realm-East-Upper_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:200px;">
Light Realm East Mid-Upper<br><span id="Light-Realm-East-Mid-Upper_guild">Loading...</span><br>Held for <span id="Light-Realm-East-Mid-Upper_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:200px;">
Light Realm Entrance Upper<br><span id="Light-Realm-Entrance-Upper_guild">Loading...</span><br>Held for <span id="Light-Realm-Entrance-Upper_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Light Realm East Mid<br><span id="Light-Realm-East-Mid_guild">Loading...</span><br>Held for <span id="Light-Realm-East-Mid_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Light Realm East Lower<br><span id="Light-Realm-East-Lower_guild">Loading...</span><br>Held for <span id="Light-Realm-East-Lower_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Light Realm East<br><span id="Light-Realm-East_guild">Loading...</span><br>Held for <span id="Light-Realm-East_time">Loading...</span>
</span><br><br><br>
<span style="text-align:center; display:inline-block; width:169px;">
Spiraling Trees<br><span id="Spiraling-Trees_guild">Loading...</span><br>Held for <span id="Spiraling-Trees_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Road to Corruption<br><span id="Road-to-Corruption_guild">Loading...</span><br>Held for <span id="Road-to-Corruption_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Light Realm Corruption<br><span id="Light-Realm-Corruption_guild">Loading...</span><br>Held for <span id="Light-Realm-Corruption_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Orphion's Seal Upper<br><span id="Orphion's-Seal-Upper_guild">Loading...</span><br>Held for <span id="Orphion's-Seal-Upper_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Orphion's Seal<br><span id="Orphion's-Seal_guild">Loading...</span><br>Held for <span id="Orphion's-Seal_time">Loading...</span>
</span><span style="text-align:center; display:inline-block; width:169px;">
Light Realm Mushrooms<br><span id="Light-Realm-Mushrooms_guild">Loading...</span><br>Held for <span id="Light-Realm-Mushrooms_time">Loading...</span>
</span>
<br><br><br><br>
<b><u>Useful links:</u></b>
<br><a href="https://wynndata.tk/stats/guild/PythonitGang" target="_blank">PTN Guild stats page - WynnData</a> | <a href="https://www.wynndata.tk/map/" target="_blank">Wynncraft world map - WynnData</a> | <a href="https://map.wynncraft.com" target="_blank">Official Wynncraft map - wynncraft.com</a> | <a href="https://wynncraft.gamepedia.com/" target="_blank">Wynncraft wiki</a>
</body>
<hr>
<b>PythonitGang Hub - Created by Roilafufit</b>
<br>
<br>Website stats: <a id="stats" onclick="document.getElementById('stats').innerHTML = '<br><img src=\'https://img.shields.io/tokei/lines/github/Roilafufit/PythonitGang-Hub?label=total%20lines%20of%20code\'>&nbsp;<img src=\'https://img.shields.io/github/languages/code-size/Roilafufit/PythonitGang-Hub\'>';"><u>Show</u></a>
<br>Wynncraft API uptime: <a id="api_uptime" onclick="document.getElementById('api_uptime').innerHTML = '<br><img src=\'https://img.shields.io/website?down_color=critical&down_message=down&label=Wynncraft%20legacy%20API%20-%20Online%20Players&up_color=brightgreen&up_message=up&url=https%3A%2F%2Fapi.wynncraft.com%2Fpublic_api.php%3Faction%3DonlinePlayers\'>&nbsp;<img src=\'https://img.shields.io/website?down_color=critical&down_message=down&label=Wynncraft%20legacy%20API%20-%20Territory%20List&up_color=brightgreen&up_message=up&url=https%3A%2F%2Fapi.wynncraft.com%2Fpublic_api.php%3Faction%3DterritoryList\'> <img src=\'https://img.shields.io/website?down_color=critical&down_message=down&label=Wynncraft%20legacy%20API%20-%20PythonitGang%20Guild%20Stats&up_color=brightgreen&up_message=up&url=https%3A%2F%2Fapi.wynncraft.com%2Fpublic_api.php%3Faction%3DguildStats%26command%3DPythonitGang\'>';"><u>Show</u></a>
<br><br><a href="changelog.html">Site changelog</a>
<br>This website utilizes the Axios Javascript library, distributed under the <a href="https://github.com/axios/axios/blob/master/LICENSE" target="_blank">MIT License</a>.
</center>
<script type="text/javascript">main();</script>
